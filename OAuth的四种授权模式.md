---
title: OAuth的四种授权模式
date: 2020-08-27 16:23:35
tags: 登录和授权
---
OAuth是Open Authority的缩写,是令牌代替用户密码访问应用的又一标准,SSO单点登录里也有令牌的环节。
<!--more-->

## client credentials（客户端模式）
![image](/asset/article/20200827/1.png)
* 客户端向认证服务器进行身份认证，并要求一个访问令牌；
* 认证服务器确认无误后，向客户端提供访问令牌；
* 客户端携带令牌向资源服务器请求访问资源；
* 资源服务器返回资源
---------------------

## resource owner password credentials（密码模式）
![image](/asset/article/20200827/2.png)
* 用户向客户端提供用户名密码；
* 客户端将用户名和密码发给认证服务器请求令牌；
* 认证服务器确认无误后，向客户端提供访问令牌；
* 客户端携带令牌向资源服务器请求访问资源；
* 资源服务器返回资源。
---------------------

## implicit（简化模式）
![image](/asset/article/20200827/3.png)
* 用户访问客户端，客户端通过用户代理向认证服务器请求授权码；
* 用户同意授权；
* 认证服务器返回一个重定向地址，该地址的url的Hash部分包含了令牌；
* 用户代理向资源服务器发送请求，其中不带令牌信息；
* 资源服务器返回一个网页，其中包含的脚本可以获取Hash中的令牌；
* 用户代理执行脚本提取令牌；
* 用户代理将令牌返回给客户端；
* 客户端携带令牌向资源服务器请求资源；
* 资源服务器返回资源。
---------------------

## authorization code（授权码模式）
![image](/asset/article/20200827/4.png)
* 用户访问客户端，客户端通过用户代理向认证服务器请求授权码；
* 用户同意授权；
* 认证服务器通过用户代理返回授权码给客户端；
* 客户端携带授权码向认证服务器请求访问令牌（AccessToken）；
* 认证服务器返回访问令牌；
* 客户端携带访问令牌向资源服务器请求资源；
* 资源服务器返回资源。

------------------------
## 应用场景
客户端模式：没有用户参与的，完全信任的服务器端服务
密码模式：第一方单页应用与第一方原生App
简化模式：第三方单页面应用
授权码模式：第三方Web服务器端应用与第三方原生App



【参考文献】
https://www.cnblogs.com/yanglang/p/12234487.html
https://blog.csdn.net/wqy248/article/details/95061282